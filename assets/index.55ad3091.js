function P(){import("data:text/javascript,")}(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&a(r)}).observe(document,{childList:!0,subtree:!0});function e(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerpolicy&&(n.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?n.credentials="include":t.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(t){if(t.ep)return;t.ep=!0;const n=e(t);fetch(t.href,n)}})();const _="modulepreload",m=function(o){return"/"+o},f={},s=function(i,e,a){if(!e||e.length===0)return i();const t=document.getElementsByTagName("link");return Promise.all(e.map(n=>{if(n=m(n),n in f)return;f[n]=!0;const r=n.endsWith(".css"),d=r?'[rel="stylesheet"]':"";if(!!a)for(let l=t.length-1;l>=0;l--){const u=t[l];if(u.href===n&&(!r||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${n}"]${d}`))return;const c=document.createElement("link");if(c.rel=r?"stylesheet":_,r||(c.as="script",c.crossOrigin=""),c.href=n,document.head.appendChild(c),r)return new Promise((l,u)=>{c.addEventListener("load",l),c.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>i())},$=(o,i)=>{const e=o[i];return e?typeof e=="function"?e():Promise.resolve(e):new Promise((a,t)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+i)))})};async function g(){window.$={},window.$.utils=window.$u=window.$utils=await s(()=>import("./index.cde2a256.js"),[]),window.$.logic=window.$logic=await s(()=>import("./logic.a782f78c.js"),[]),window.$.normalize=window.$norml=window.$normalize=await s(()=>import("./normalize.885e419e.js"),[]),window.$.hash=window.$hash=await s(()=>import("./hash.ba3971b1.js"),[]),window.$.event=window.$event=await s(()=>import("./index.f6125e58.js"),[]),window.$on=$event.on,window.$off=$event.off,window.$emit=$event.emit,window.$.moment=window.$moment=(await s(()=>import("./moment.00a37e1e.js"),[])).default}async function h(o,i){const e={};for(const a of o)e[a]={};return await Promise.all(i.map(a=>$(Object.assign({"./config/configure.default.js":()=>s(()=>import("./configure.default.84bff208.js"),[]),"./config/configure.search.js":()=>s(()=>import("./configure.search.e7a0686e.js"),[])}),`./config/${a}.js`).catch(t=>null))).then(a=>a.forEach(t=>{if(!!t)for(const n of o)!t[n]||Object.assign(e[n],t[n]())})),e}async function y(o){!o||(window.$.debug=window.$debug=o.on,$debug&&o.patch&&await o.patch())}async function E(o){}async function v(o){const{default:i}=await s(()=>import("./index.43e3dbda.js"),[]),e=new i(o);window.$.lang=window.$lang=e,await e.initialize()}async function L(o){const{default:i}=await s(()=>import("./index.502eb1ab.js"),[]),e=new i(o);window.$.core=window.$$=window.$core=e,await e.initialize()}async function b(o){const{default:i}=await s(()=>import("./index.05e1e814.js"),["assets/index.05e1e814.js","assets/index.5315aad2.css"]),e=new i(o);window.$.app=window.$app=e,await e.initialize()}function p(){const o=/\/#\/(([^\/\?]+)\/?)(\?+(.*))?/.exec(window.location.href);if(!o)return;let[,,i,,e,,a]=o;e?e=JSON.parse(decodeURIComponent(e)):e={},a&&a.split("&").forEach(t=>{const[n,r]=t.split("=");e[n]=JSON.parse(decodeURIComponent(r))}),$app.switch(i,e)}async function O(o){window.onerror=(r,d,w,c,l)=>alert(`${r}at: ${d||"<anonymous>"}:${w}:${c}
${l}`),await g(),$on("network.banned",()=>window.location.reload());const{debug:i,logger:e,i18n:a,core:t,app:n}=await h(["debug","logger","i18n","core","app"],o);await y(i),await E(),await v(a),await L(t),await b(n),$app.loading(!0);try{const r=$core.database.kv.get("banned");if(r&&r>Date.now()){$app.tips($lang.t.banned);return}await $core.start(),await $app.start(),$app.loading(!1),$emit("system.start")}catch(r){console.error(r),$app.tips($lang.t.init_err)}window.onpopstate=p,p()}O(["configure.default","configure.search","configure"]);export{$ as _,P as __vite_legacy_guard,s as a};
//# sourceMappingURL=index.55ad3091.js.map
